<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Votación</title>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.14.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="jquery-ui-1.14.1.custom/jquery-ui.js"></script>
</head>
<body>

    <fieldset>
        <legend>¿Cuál es tu equipo?</legend>
        <label><input type="radio" name="equipo" value="1"> Barcelona</label>
        <label><input type="radio" name="equipo" value="2"> Madrid</label>
        <label><input type="radio" name="equipo" value="3"> Recre</label>
    </fieldset><br>

    <button class="ui-button ui-widget ui-corner-all" onclick="votar()">Votar</button><span id="t"></span><br>

    <span id="bar">Barcelona: </span><span id="barn">0</span>
    <div id="barp"></div>
    <span id="mad">Madrid: </span><span id="madn">0</span>
    <div id="madp"></div>
    <span id="rec">Recre: </span><span id="recn">0</span> 
    <div id="recp"></div>

    <script>
        $('fieldset').controlgroup({

        });
        $('input').checkboxradio({});
        $('#barp').progressbar({
            value:0
        });

        $('#madp').progressbar({
            value:0
        });

        $('#recp').progressbar({
            value:0
        });
        function votar() {
            opciones = document.getElementsByName("equipo");
            document.getElementById('t').textContent = '';
            v = null;

            for (i = 0; i < opciones.length; i++) {
                if (opciones[i].checked) {
                    v = parseInt(opciones[i].value);
                    break;
                }
            }

            if (v === null) {
                document.getElementById('t').textContent = 'Elige una opción';
                return;
            }

            b = document.getElementById('barn');
            m = document.getElementById('madn');
            r = document.getElementById('recn');

            switch (v) {
                case 1:
                    b.textContent = parseInt(b.textContent) + 1;
                    break;
                case 2:
                    m.textContent = parseInt(m.textContent) + 1;
                    break;
                case 3:
                    r.textContent = parseInt(r.textContent) + 1;
                    break;
            }

            porcentaje();
        }

        function porcentaje() {
            $('#barn').tex
            b = parseInt(document.getElementById('barn').textContent);
            m = parseInt(document.getElementById('madn').textContent);
            r = parseInt(document.getElementById('recn').textContent);
            total = b + m + r;

            $('#barp').progressbar({
                value:(b / total) * 100
            });

            $('#madp').progressbar({
                value:(m / total) * 100
            });

            $('#recp').progressbar({
                value:(r / total) * 100
            });
        }
    </script>

    <style>
        div.ui-progressbar-value {
        background-color: #c61b1b;
        }
    </style>

</body>
</html>
